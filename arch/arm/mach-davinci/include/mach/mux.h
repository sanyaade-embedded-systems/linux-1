/*
 * Table of the DAVINCI register configurations for the PINMUX combinations
 *
 * Author: Vladimir Barinov, MontaVista Software, Inc. <source@mvista.com>
 *
 * Based on linux/include/asm-arm/arch-omap/mux.h:
 * Copyright (C) 2003 - 2005 Nokia Corporation
 *
 * Written by Tony Lindgren
 *
 * 2007 (c) MontaVista Software, Inc. This file is licensed under
 * the terms of the GNU General Public License version 2. This program
 * is licensed "as is" without any warranty of any kind, whether express
 * or implied.
 *
 * Copyright (C) 2008 Texas Instruments.
 */

#ifndef __INC_MACH_MUX_H
#define __INC_MACH_MUX_H

#include <mach/dm644x.h>

/* System module registers */
#define PINMUX0			0x00
#define PINMUX1			0x04
/* dm355 only */
#define PINMUX2			0x08
#define PINMUX3			0x0c
#define PINMUX4			0x10
#define INTMUX			0x18
#define EVTMUX			0x1c

struct mux_config {
	char *name;
	const char *mux_reg_name;
	const unsigned int mux_reg;
	const unsigned char reg_index;
	const unsigned char mask_offset;
	const unsigned char mask;
	const unsigned char mode;
	bool debug;
};

enum davinci_dm644x_index {
	/* ATA and HDDIR functions */
	DM644X_HDIREN,
	DM644X_ATAEN,
	DM644X_ATAEN_DISABLE,

	/* HPI functions */
	DM644X_HPIEN_DISABLE,

	/* AEAW functions */
	DM644X_AEAW,

	/* Memory Stick */
	DM644X_MSTK,

	/* I2C */
	DM644X_I2C,

	/* ASP function */
	DM644X_MCBSP,

	/* UART1 */
	DM644X_UART1,

	/* UART2 */
	DM644X_UART2,

	/* PWM0 */
	DM644X_PWM0,

	/* PWM1 */
	DM644X_PWM1,

	/* PWM2 */
	DM644X_PWM2,

	/* VLYNQ function */
	DM644X_VLYNQEN,
	DM644X_VLSCREN,
	DM644X_VLYNQWD,

	/* EMAC and MDIO function */
	DM644X_EMACEN,

	/* GPIO3V[0:16] pins */
	DM644X_GPIO3V,

	/* GPIO pins */
	DM644X_GPIO0,
	DM644X_GPIO3,
	DM644X_GPIO43_44,
	DM644X_GPIO46_47,

	/* VPBE */
	DM644X_RGB666,

	/* LCD */
	DM644X_LOEEN,
	DM644X_LFLDEN,
};

enum davinci_dm646x_index {
	/* ATA function */
	DM646X_ATAEN,

	/* AUDIO Clock */
	DM646X_AUDCK1,
	DM646X_AUDCK0,
};

enum davinci_dm355_index {
	/* MMC/SD 0 */
	DM355_MMCSD0,

	/* MMC/SD 1 */
	DM355_SD1_CLK,
	DM355_SD1_CMD,
	DM355_SD1_DATA3,
	DM355_SD1_DATA2,
	DM355_SD1_DATA1,
	DM355_SD1_DATA0,

	/* I2C */
	DM355_I2C_SDA,
	DM355_I2C_SCL,

	/* ASP0 function */
	DM355_MCBSP0_BDX,
	DM355_MCBSP0_X,
	DM355_MCBSP0_BFSX,
	DM355_MCBSP0_BDR,
	DM355_MCBSP0_R,
	DM355_MCBSP0_BFSR,

	/* SPI0 */
	DM355_SPI0_SDI,
	DM355_SPI0_SDENA0,
	DM355_SPI0_SDENA1,

	/* IRQ muxing */
	DM355_INT_EDMA_CC,
	DM355_INT_EDMA_TC0_ERR,
	DM355_INT_EDMA_TC1_ERR,

	/* EDMA event muxing */
	DM355_EVT8_ASP1_TX,
	DM355_EVT9_ASP1_RX,
	DM355_EVT26_MMC0_RX,
};

enum davinci_da830_index {
	/* UART0 function */
	DA830_NUART0_CTS,
	DA830_NUART0_RTS,
	DA830_UART0_RXD,
	DA830_UART0_TXD,

	/* UART1 function */
	DA830_UART1_RXD,
	DA830_UART1_TXD,

	/* UART2 function */
	DA830_UART2_RXD,
	DA830_UART2_TXD,

	/* I2C function */
	DA830_I2C1_SCL,
	DA830_I2C1_SDA,
	DA830_I2C0_SDA,
	DA830_I2C0_SCL,

	/* EMAC function */
	DA830_RMII_TXD_0,
	DA830_RMII_TXD_1,
	DA830_RMII_TXEN,
	DA830_RMII_CRS_DV,
	DA830_RMII_RXD_0,
	DA830_RMII_RXD_1,
	DA830_RMII_RXER,
	DA830_MDIO_CLK,
	DA830_MDIO_D,

	/* MMC/SD function */
	DA830_MMCSD_DAT_0,
	DA830_MMCSD_DAT_1,
	DA830_MMCSD_DAT_2,
	DA830_MMCSD_DAT_3,
	DA830_MMCSD_DAT_4,
	DA830_MMCSD_DAT_5,
	DA830_MMCSD_DAT_6,
	DA830_MMCSD_DAT_7,
	DA830_MMCSD_CLK,
	DA830_MMCSD_CMD,

	/* EMIFA function */
	DA830_EMA_D_0,
	DA830_EMA_D_1,
	DA830_EMA_D_2,
	DA830_EMA_D_3,
	DA830_EMA_D_4,
	DA830_EMA_D_5,
	DA830_EMA_D_6,
	DA830_EMA_D_7,
	DA830_EMA_D_8,
	DA830_EMA_D_9,
	DA830_EMA_D_10,
	DA830_EMA_D_11,
	DA830_EMA_D_12,
	DA830_EMA_D_13,
	DA830_EMA_D_14,
	DA830_EMA_D_15,
	DA830_EMA_A_0,
	DA830_EMA_A_1,
	DA830_EMA_A_2,
	DA830_EMA_A_3,
	DA830_EMA_A_4,
	DA830_EMA_A_5,
	DA830_EMA_A_6,
	DA830_EMA_A_7,
	DA830_EMA_A_8,
	DA830_EMA_A_9,
	DA830_EMA_A_10,
	DA830_EMA_A_11,
	DA830_EMA_A_12,
	DA830_EMA_BA_1,
	DA830_EMA_BA_0,
	DA830_EMA_CLK,
	DA830_EMA_SDCKE,
	DA830_NEMA_CAS,
	DA830_NEMA_CS_4,
	DA830_NEMA_RAS,
	DA830_NEMA_WE,
	DA830_NEMA_CS_0,
	DA830_NEMA_CS_2,
	DA830_NEMA_CS_3,
	DA830_NEMA_OE,
	DA830_NEMA_WE_DQM_1,
	DA830_NEMA_WE_DQM_0,
	DA830_NEMA_CS_5,
	DA830_EMA_WAIT_0,

	/* EMIFB function */
	DA830_EMB_SDCKE,
	DA830_EMB_CLK_GLUE,
	DA830_EMB_CLK,
	DA830_NEMB_CS_0,
	DA830_NEMB_CAS,
	DA830_NEMB_RAS,
	DA830_NEMB_WE,
	DA830_EMB_BA_1,
	DA830_EMB_BA_0,
	DA830_EMB_A_0,
	DA830_EMB_A_1,
	DA830_EMB_A_2,
	DA830_EMB_A_3,
	DA830_EMB_A_4,
	DA830_EMB_A_5,
	DA830_EMB_A_6,
	DA830_EMB_A_7,
	DA830_EMB_A_8,
	DA830_EMB_A_9,
	DA830_EMB_A_10,
	DA830_EMB_A_11,
	DA830_EMB_A_12,
	DA830_EMB_D_31,
	DA830_EMB_D_30,
	DA830_EMB_D_29,
	DA830_EMB_D_28,
	DA830_EMB_D_27,
	DA830_EMB_D_26,
	DA830_EMB_D_25,
	DA830_EMB_D_24,
	DA830_EMB_D_23,
	DA830_EMB_D_22,
	DA830_EMB_D_21,
	DA830_EMB_D_20,
	DA830_EMB_D_19,
	DA830_EMB_D_18,
	DA830_EMB_D_17,
	DA830_EMB_D_16,
	DA830_NEMB_WE_DQM_3,
	DA830_NEMB_WE_DQM_2,
	DA830_EMB_D_0,
	DA830_EMB_D_1,
	DA830_EMB_D_2,
	DA830_EMB_D_3,
	DA830_EMB_D_4,
	DA830_EMB_D_5,
	DA830_EMB_D_6,
	DA830_EMB_D_7,
	DA830_EMB_D_8,
	DA830_EMB_D_9,
	DA830_EMB_D_10,
	DA830_EMB_D_11,
	DA830_EMB_D_12,
	DA830_EMB_D_13,
	DA830_EMB_D_14,
	DA830_EMB_D_15,
	DA830_NEMB_WE_DQM_1,
	DA830_NEMB_WE_DQM_0,

	/* SPI0 function */
	DA830_SPI0_SOMI_0,
	DA830_SPI0_SIMO_0,
	DA830_SPI0_CLK,
	DA830_NSPI0_ENA,
	DA830_NSPI0_SCS_0,

	/* SPI1 function */
	DA830_SPI1_SOMI_0,
	DA830_SPI1_SIMO_0,
	DA830_SPI1_CLK,
	DA830_NSPI1_ENA,
	DA830_NSPI1_SCS_0,
	DA830_GPIO3_10,

	/* LCD function */
	DA830_LCD_D_8,
	DA830_LCD_D_9,
	DA830_LCD_D_7,
	DA830_LCD_D_10,
	DA830_LCD_D_11,
	DA830_LCD_D_12,
	DA830_LCD_D_13,
	DA830_LCD_D_14,
	DA830_LCD_D_15,
	DA830_LCD_D_6,
	DA830_LCD_D_3,
	DA830_LCD_D_2,
	DA830_LCD_D_1,
	DA830_LCD_D_0,
	DA830_LCD_PCLK,
	DA830_LCD_HSYNC,
	DA830_LCD_VSYNC,
	DA830_NLCD_AC_ENB_CS,
	DA830_LCD_MCLK,
	DA830_LCD_D_5,
	DA830_LCD_D_4,

	/* McASP */

	DA830_AXR1_10,
	DA830_AXR1_11,
	DA830_AHCLKX1,
	DA830_ACLKX1,
	DA830_AFSX1,
	DA830_AHCLKR1,
	DA830_ACLKR1,
	DA830_AFSR1,
	DA830_AMUTE1,
	DA830_AXR1_0,
	DA830_AXR1_1,
	DA830_AXR1_2,
	DA830_AXR1_3,
	DA830_AXR1_4,
	DA830_AXR1_5,
	DA830_AXR1_6,
	DA830_AXR1_7,
	DA830_AXR1_8,
	DA830_AXR1_9,
};

enum davinci_da850_index {

	/* UART0 function */
	DA850_NUART0_CTS,
	DA850_NUART0_RTS,
	DA850_UART0_RXD,
	DA850_UART0_TXD,

	/* UART1 function */
	DA850_NUART1_CTS,
	DA850_NUART1_RTS,
	DA850_UART1_RXD,
	DA850_UART1_TXD,

	/* UART2 function */
	DA850_NUART2_CTS,
	DA850_NUART2_RTS,
	DA850_UART2_RXD,
	DA850_UART2_TXD,

	/* EMAC function */
	DA850_RMII_TXD_0,
	DA850_RMII_TXD_1,
	DA850_RMII_TXEN,
	DA850_RMII_CRS_DV,
	DA850_RMII_RXD_0,
	DA850_RMII_RXD_1,
	DA850_RMII_RXER,
	DA850_RMII_MHZ_50_CLK,
	DA850_MDIO_CLK,
	DA850_MDIO_D,
	DA850_MII_TXEN,
	DA850_MII_TXCLK,
	DA850_MII_COL,
	DA850_MII_TXD_3,
	DA850_MII_TXD_2,
	DA850_MII_TXD_1,
	DA850_MII_TXD_0,
	DA850_MII_RXER,
	DA850_MII_CRS,
	DA850_MII_RXCLK,
	DA850_MII_RXDV,
	DA850_MII_RXD_3,
	DA850_MII_RXD_2,
	DA850_MII_RXD_1,
	DA850_MII_RXD_0,

	/* I2C1 function */
	DA850_I2C1_SCL,
	DA850_I2C1_SDA,

	/* I2C0 function */
	DA850_I2C0_SDA,
	DA850_I2C0_SCL,

	/* MMC/SD0 function */
	DA850_MMCSD0_DAT_0,
	DA850_MMCSD0_DAT_1,
	DA850_MMCSD0_DAT_2,
	DA850_MMCSD0_DAT_3,
	DA850_MMCSD0_DAT_4,
	DA850_MMCSD0_DAT_5,
	DA850_MMCSD0_DAT_6,
	DA850_MMCSD0_DAT_7,
	DA850_MMCSD0_CLK,
	DA850_MMCSD0_CMD,

	/* MMC/SD1 function */
	DA850_MMCSD1_DAT_0,
	DA850_MMCSD1_DAT_1,
	DA850_MMCSD1_DAT_2,
	DA850_MMCSD1_DAT_3,
	DA850_MMCSD1_DAT_4,
	DA850_MMCSD1_DAT_5,
	DA850_MMCSD1_DAT_6,
	DA850_MMCSD1_DAT_7,
	DA850_MMCSD1_CLK,
	DA850_MMCSD1_CMD,

	/* EMIF2.5/EMIFA function */
	DA850_EMA_D_7,
	DA850_EMA_D_6,
	DA850_EMA_D_5,
	DA850_EMA_D_4,
	DA850_EMA_D_3,
	DA850_EMA_D_2,
	DA850_EMA_D_1,
	DA850_EMA_D_0,
	DA850_EMA_D_8,
	DA850_EMA_D_9,
	DA850_EMA_D_10,
	DA850_EMA_D_11,
	DA850_EMA_D_12,
	DA850_EMA_D_13,
	DA850_EMA_D_14,
	DA850_EMA_D_15,
	DA850_EMA_A_0,
	DA850_EMA_A_1,
	DA850_EMA_A_2,
	DA850_EMA_A_3,
	DA850_EMA_A_4,
	DA850_EMA_A_5,
	DA850_EMA_A_6,
	DA850_EMA_A_7,
	DA850_EMA_A_8,
	DA850_EMA_A_9,
	DA850_EMA_A_10,
	DA850_EMA_A_11,
	DA850_EMA_A_12,
	DA850_EMA_A_13,
	DA850_EMA_A_14,
	DA850_EMA_A_15,
	DA850_EMA_A_16,
	DA850_EMA_A_17,
	DA850_EMA_A_18,
	DA850_EMA_A_19,
	DA850_EMA_A_20,
	DA850_EMA_A_21,
	DA850_EMA_A_22,
	DA850_EMA_A_23,
	DA850_EMA_BA_1,
	DA850_EMA_BA_0,
	DA850_EMA_CLK,
	DA850_EMA_SDCKE,
	DA850_NEMA_RAS,
	DA850_NEMA_CAS,
	DA850_NEMA_WE_DQM_0,
	DA850_NEMA_WE_DQM_1,
	DA850_EMA_WAIT_1,
	DA850_NEMA_CS_0,
	DA850_NEMA_CS_2,
	DA850_NEMA_CS_3,
	DA850_NEMA_CS_4,
	DA850_NEMA_CS_5,
	DA850_NEMA_WE,
	DA850_NEMA_OE,
	DA850_EMA_RNW,
	DA850_EMA_WAIT_0,

	/* EMIF3a/EMIFB function - pins are not muxed */

	/* SPI0 function */
	DA850_SPI0_CLK,
	DA850_SPI0_ENA,
	DA850_SPI0_SOMI,
	DA850_SPI0_SIMO,
	DA850_SPI0_CS_5,
	DA850_SPI0_CS_4,
	DA850_SPI0_CS_3,
	DA850_SPI0_CS_2,
	DA850_SPI0_CS_1,
	DA850_SPI0_CS_0,

	/* SPI1 function */
	DA850_SPI1_CS_7,
	DA850_SPI1_CS_6,
	DA850_SPI1_CS_5,
	DA850_SPI1_CS_4,
	DA850_SPI1_CS_3,
	DA850_SPI1_CS_2,
	DA850_SPI1_CS_1,
	DA850_SPI1_CS_0,
	DA850_SPI1_CLK,
	DA850_SPI1_ENA,
	DA850_SPI1_SOMI,
	DA850_SPI1_SIMO,

	/* McASP function */
	DA850_MCASP_ACLKR,
	DA850_MCASP_ACLKX,
	DA850_MCASP_AFSR,
	DA850_MCASP_AFSX,
	DA850_MCASP_AHCLKR,
	DA850_MCASP_AHCLKX,
	DA850_MCASP_AMUTE,
	DA850_MCASP_AXR_15,
	DA850_MCASP_AXR_14,
	DA850_MCASP_AXR_13,
	DA850_MCASP_AXR_12,
	DA850_MCASP_AXR_11,
	DA850_MCASP_AXR_10,
	DA850_MCASP_AXR_9,
	DA850_MCASP_AXR_8,
	DA850_MCASP_AXR_7,
	DA850_MCASP_AXR_6,
	DA850_MCASP_AXR_5,
	DA850_MCASP_AXR_4,
	DA850_MCASP_AXR_3,
	DA850_MCASP_AXR_2,
	DA850_MCASP_AXR_1,
	DA850_MCASP_AXR_0,

	/* LCD function */
	DA850_LCD_D_7,
	DA850_LCD_D_6,
	DA850_LCD_D_5,
	DA850_LCD_D_4,
	DA850_LCD_D_3,
	DA850_LCD_D_2,
	DA850_LCD_D_1,
	DA850_LCD_D_0,
	DA850_LCD_D_15,
	DA850_LCD_D_14,
	DA850_LCD_D_13,
	DA850_LCD_D_12,
	DA850_LCD_D_11,
	DA850_LCD_D_10,
	DA850_LCD_D_9,
	DA850_LCD_D_8,
	DA850_LCD_PCLK,
	DA850_LCD_MCLK,
	DA850_LCD_HSYNC,
	DA850_LCD_VSYNC,
	DA850_NLCD_AC_ENB_CS,

	/* VPIF function */
	DA850_VPIF_CLKIN0,
	DA850_VPIF_CLKIN1,
	DA850_VPIF_DIN_7,
	DA850_VPIF_DIN_6,
	DA850_VPIF_DIN_5,
	DA850_VPIF_DIN_4,
	DA850_VPIF_DIN_3,
	DA850_VPIF_DIN_2,
	DA850_VPIF_DIN_1,
	DA850_VPIF_DIN_0,
	DA850_VPIF_DIN_15_V,
	DA850_VPIF_DIN_14_H,
	DA850_VPIF_DIN_13_FLD,
	DA850_VPIF_DIN_12,
	DA850_VPIF_DIN_11,
	DA850_VPIF_DIN_10,
	DA850_VPIF_DIN_9,
	DA850_VPIF_DIN_8,
	DA850_VPIF_DOUT_7,
	DA850_VPIF_DOUT_6,
	DA850_VPIF_DOUT_5,
	DA850_VPIF_DOUT_4,
	DA850_VPIF_DOUT_3,
	DA850_VPIF_DOUT_2,
	DA850_VPIF_DOUT_1,
	DA850_VPIF_DOUT_0,
	DA850_VPIF_DOUT_15,
	DA850_VPIF_DOUT_14,
	DA850_VPIF_DOUT_13,
	DA850_VPIF_DOUT_12,
	DA850_VPIF_DOUT_11,
	DA850_VPIF_DOUT_10,
	DA850_VPIF_DOUT_9,
	DA850_VPIF_DOUT_8,
	DA850_VPIF_CLKIN_2,
	DA850_VPIF_CLKO_2,
	DA850_VPIF_CLKIN_3,
	DA850_VPIF_CLKO_3,

	/* Timer0 function */
	DA850_TM64P0_IN12,
	DA850_TM64P0_OUT12,

	/* Timer1 function */
	DA850_TM64P1_IN12,
	DA850_TM64P1_OUT12,

	/* Timer2 function */
	DA850_TM64P2_IN12,
	DA850_TM64P2_OUT12,

	/* Timer3 function */
	DA850_TM64P3_IN12,
	DA850_TM64P3_OUT12,

	/* SATA function */
	DA850_SATA_MP_SWITCH,
	DA850_SATA_CP_DET,
	DA850_SATA_LED,
	DA850_SATA_CP_POD,

	/* GPIO function */
	DA850_GPIO4_0,
	DA850_GPIO4_1,
};

#ifdef CONFIG_DAVINCI_MUX
/* setup pin muxing */
extern void davinci_mux_init(void);
extern int davinci_mux_register(const struct mux_config *pins,
				unsigned long size, unsigned long *in_use);
extern int davinci_cfg_reg(unsigned long reg_cfg);
#else
/* boot loader does it all (no warnings from CONFIG_DAVINCI_MUX_WARNINGS) */
static inline void davinci_mux_init(void) {}
static inline int davinci_mux_register(const struct mux_config *pins,
				       unsigned long size) { return 0; }
static inline int davinci_cfg_reg(unsigned long reg_cfg) { return 0; }
#endif

#endif /* __INC_MACH_MUX_H */
